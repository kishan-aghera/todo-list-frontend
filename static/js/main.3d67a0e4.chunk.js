(this["webpackJsonptodo-list-frontend"]=this["webpackJsonptodo-list-frontend"]||[]).push([[0],{52:function(e,t,n){},71:function(e,t,n){},86:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n.n(a),o=n(24),i=n.n(o),c=(n(52),n(23)),r=n(15),d=n(16),l=n(9),u=n(18),h=n(17),j=n(26),g=n(7),b=n(10),O=n.n(b),f=n(46),p=n.n(f),x=(n(71),n(90)),m=n(91),v=n(92),L=n(93),k=n(94),S=n(95),C=n(21),I=n(87),_=n(88),w=n(89),y=n(2),E=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).state={email:"",password:"",password_confirmation:"",registrationErrors:""},a.handleSubmit=a.handleSubmit.bind(Object(l.a)(a)),a.handleChange=a.handleChange.bind(Object(l.a)(a)),a}return Object(d.a)(n,[{key:"handleChange",value:function(e){this.setState(Object(C.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){var t=this,n=this.state,a=n.email,s=n.password,o=n.password_confirmation;O.a.post("http://localhost:3001/registrations",{user:{email:a,password:s,password_confirmation:o}},{withCredentials:!0}).then((function(e){"created"===e.data.status&&t.props.handleSuccessfulAuth(e.data)})).catch((function(e){console.log("Registration Error: ",e)})),e.preventDefault()}},{key:"render",value:function(){return Object(y.jsx)("div",{children:Object(y.jsxs)(I.a,{onSubmit:this.handleSubmit,children:[Object(y.jsx)(_.a,{children:Object(y.jsx)(w.a,{type:"email",name:"email",placeholder:"Email",value:this.state.email,onChange:this.handleChange,required:!0})}),Object(y.jsx)(_.a,{children:Object(y.jsx)(w.a,{type:"password",name:"password",placeholder:"Password",value:this.state.password,onChange:this.handleChange,required:!0})}),Object(y.jsx)(_.a,{children:Object(y.jsx)(w.a,{type:"password",name:"password_confirmation",placeholder:"Password confirmation",value:this.state.password_confirmation,onChange:this.handleChange,required:!0})}),Object(y.jsx)(x.a,{color:"primary",type:"submit",children:"Register"})]})})}}]),n}(a.Component),N=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).state={email:"",password:"",loginErrors:""},a.handleSubmit=a.handleSubmit.bind(Object(l.a)(a)),a.handleChange=a.handleChange.bind(Object(l.a)(a)),a}return Object(d.a)(n,[{key:"handleChange",value:function(e){this.setState(Object(C.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){var t=this,n=this.state,a=n.email,s=n.password;O.a.post("http://localhost:3001/sessions",{user:{email:a,password:s}},{withCredentials:!0}).then((function(e){e.data.logged_in?t.props.handleSuccessfulAuth(e.data):alert("User does not exist. Please Register first.")})).catch((function(e){console.log("Login Error: ",e)})),e.preventDefault()}},{key:"render",value:function(){return Object(y.jsx)("div",{children:Object(y.jsxs)(I.a,{onSubmit:this.handleSubmit,children:[Object(y.jsx)(_.a,{children:Object(y.jsx)(w.a,{type:"email",name:"email",placeholder:"Email",value:this.state.email,onChange:this.handleChange,required:!0})}),Object(y.jsx)(_.a,{children:Object(y.jsx)(w.a,{type:"password",name:"password",placeholder:"Password",value:this.state.password,onChange:this.handleChange,required:!0})}),Object(y.jsx)(x.a,{type:"submit",children:"Login"})]})})}}]),n}(a.Component),G=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).handleSuccessfulAuth=a.handleSuccessfulAuth.bind(Object(l.a)(a)),a.handleLogoutClick=a.handleLogoutClick.bind(Object(l.a)(a)),a}return Object(d.a)(n,[{key:"handleSuccessfulAuth",value:function(e){this.props.handleLogin(e),this.props.history.push("/todo-list-frontend/dashboard")}},{key:"handleLogoutClick",value:function(){var e=this;O.a.delete("http://localhost:3001/logout",{withCredentials:!0}).then((function(t){e.props.history.push("/todo-list-frontend"),e.props.handleLogout()})).catch((function(e){console.log("Logout Error",e)}))}},{key:"render",value:function(){var e=this;return Object(y.jsx)("div",{children:"LOGGED_IN"===this.props.loggedInStatus?Object(y.jsx)(x.a,{color:"danger",onClick:function(){return e.handleLogoutClick()},children:"Logout"}):Object(y.jsx)(m.a,{children:Object(y.jsxs)(v.a,{xs:"5",children:[Object(y.jsx)(L.a,{sm:"6",children:Object(y.jsxs)(k.a,{children:[Object(y.jsx)(S.a,{tag:"h5",children:"Registration"}),Object(y.jsx)(E,{handleSuccessfulAuth:this.handleSuccessfulAuth})]})}),Object(y.jsx)(L.a,{sm:"6",children:Object(y.jsxs)(k.a,{children:[Object(y.jsx)(S.a,{tag:"h5",children:"Login"}),Object(y.jsx)(N,{handleSuccessfulAuth:this.handleSuccessfulAuth})]})})]})})})}}]),n}(a.Component),D=n(96),T=n(97),A=n(98),H=n(99),F=n(100),P=function(e){return Object(y.jsx)("div",{children:Object(y.jsxs)(D.a,{color:"light",light:!0,expand:"md",children:[Object(y.jsx)(T.a,{href:"/todo-list-frontend",children:"To-do List"}),Object(y.jsxs)(A.a,{className:"mr-auto",navbar:!0,children:[e.isLoggedIn?Object(y.jsx)(H.a,{children:Object(y.jsx)(F.a,{href:"/todo-list-frontend/dashboard",children:"Dashboard"})}):null,Object(y.jsx)(H.a,{children:Object(y.jsx)(F.a,{target:"_blank",href:"https://github.com/kishan-aghera/todo-list-frontend",children:"Frontend React App Github"})}),Object(y.jsx)(H.a,{children:Object(y.jsx)(F.a,{target:"_blank",href:"https://github.com/kishan-aghera/todo-list-backend",children:"Backend Rails API Github"})})]})]})})},R=n(32),q=n(19),B=n(102),M=function(){return Object(y.jsx)(m.a,{children:Object(y.jsxs)(B.a,{color:"danger",children:["Please Login and then you can use this feature.",Object(y.jsx)("br",{}),"You can get Login or Register by visiting the following link.",Object(y.jsx)("br",{}),Object(y.jsx)(j.b,{to:"/todo-list-frontend",children:"Home"})]})})},U=function(e){var t=Object(a.useState)(""),n=Object(q.a)(t,2),s=n[0],o=n[1];return Object(a.useEffect)((function(){o(e.existingName)}),[e.existingName]),Object(y.jsx)(a.Fragment,{children:e.isLoggedIn&&e.user_id?Object(y.jsxs)("form",{onSubmit:e.isEdit?function(t){t.preventDefault(),e.updateTaskHandler(s),o("")}:function(t){t.preventDefault(),e.addNewTaskHandler(s),o("")},children:[Object(y.jsx)("input",{type:"text",value:s,placeholder:"Task Name",onChange:function(e){o(e.target.value)},required:!0}),Object(y.jsx)(x.a,{color:"info",type:"submit",children:e.isEdit?"Update Task":"Add Task"})]}):Object(y.jsx)(M,{})})},J=n(101);function W(e){var t={padding:"7px",margin:"7px 0"};return Object(y.jsx)(m.a,{children:Object(y.jsx)(k.a,{children:Object(y.jsxs)(v.a,{children:[Object(y.jsx)(L.a,{xs:"6",children:Object(y.jsx)(J.a,{tag:"h5",style:t,children:e.name})}),Object(y.jsx)(L.a,{children:Object(y.jsx)(x.a,{color:"secondary",style:t,onClick:function(){return e.updateHandler(e.id,e.name,e.user_id,e.i)},children:"Update"})}),Object(y.jsx)(L.a,{children:Object(y.jsx)(x.a,{color:"danger",style:t,onClick:function(){return e.deleteHandler(e.id,e.i)},children:"Delete"})})]})})})}var Y=function(e){var t=Object(a.useState)([]),n=Object(q.a)(t,2),s=n[0],o=n[1],i=Object(g.f)(),c=Object(a.useState)(!1),r=Object(q.a)(c,2),d=r[0],l=r[1],u=Object(a.useState)(0),h=Object(q.a)(u,2),j=h[0],b=h[1],f=Object(a.useState)(""),p=Object(q.a)(f,2),v=p[0],L=p[1],k=Object(a.useState)(!0),S=Object(q.a)(k,2),C=S[0],I=S[1],_=function(){return Object(y.jsx)(B.a,{color:"danger",children:"No Tasks Found!"})};Object(a.useEffect)((function(){e.isLoggedIn&&O.a.get("http://localhost:3001/users/".concat(e.user_id,"/tasks")).then((function(t){if(404===t.data.status&&e.isLoggedIn)I(!0),_();else{I(!1);var n=Array.from(t.data).map((function(e){return{id:e.id,name:e.name,user_id:e.user_id}}));o(n)}}))}),[d,C,e.user_id,e.isLoggedIn]);var w=function(e,t){l(!0),b(+e),L(t)},E=function(t,n){O.a.delete("http://localhost:3001/users/".concat(e.user_id,"/tasks/").concat(t)).then((function(){o((function(e){if(0!==e.length){I(!1);var t=Object(R.a)(e);return t.splice(n,1),0===t.length?(I(!0),[]):(I(!1),t)}return I(!0),[]}))}))},N=0!==s.length?s.map((function(t,n){return Object(y.jsx)("div",{children:Object(y.jsx)(W,{id:t.id,i:n,name:t.name,updateHandler:w,deleteHandler:E,user_id:e.user_id},t.id)},t.id)})):C?_():null;return Object(y.jsx)(a.Fragment,{children:e.isLoggedIn?Object(y.jsxs)(m.a,{children:[Object(y.jsx)("div",{children:e.isLoggedIn&&e.user_id&&Object(y.jsx)(x.a,{color:"danger",onClick:function(){O.a.delete("http://localhost:3001/logout",{withCredentials:!0}).then((function(){e.handleLogout(),i.push("/todo-list-frontend")})).catch((function(e){console.log("Logout Error",e)}))},children:"Logout"})}),Object(y.jsx)("div",{children:Object(y.jsx)(U,{id:j,existingName:v,isEdit:d,user_id:e.user_id,isLoggedIn:e.isLoggedIn,tasks:s,addNewTaskHandler:function(t){var n={name:t};O.a.post("http://localhost:3001/users/".concat(e.user_id,"/tasks"),n).then((function(e){var t=[].concat(Object(R.a)(s),[e.data]);o(t)})).catch((function(e){console.log("Adding new Task error: ",e)}))},updateTaskHandler:function(t){var n={name:t};O.a.put("http://localhost:3001/users/".concat(e.user_id,"/tasks/").concat(j),n).then((function(){l(!1)}))}})}),Object(y.jsx)("br",{}),N]}):Object(y.jsx)(M,{})})},z=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(r.a)(this,n),(e=t.call(this)).state={loggedInStatus:"NOT_LOGGED_IN",user:{},isLoggedIn:!1},e.handleLogin=e.handleLogin.bind(Object(l.a)(e)),e.handleLogout=e.handleLogout.bind(Object(l.a)(e)),e}return Object(d.a)(n,[{key:"checkLoginStatus",value:function(){var e=this;O.a.get("http://localhost:3001/logged_in",{withCredentials:!0}).then((function(t){t.data.logged_in&&"NOT_LOGGED_IN"===e.state.loggedInStatus?e.setState({loggedInStatus:"LOGGED_IN",user:t.data.user,isLoggedIn:!0}):!t.data.logged_in&"LOGGED_IN"===e.state.loggedInStatus&&e.setState({loggedInStatus:"NOT_LOGGED_IN",user:{},isLoggedIn:!1})})).catch((function(e){console.log("check login error",e)}))}},{key:"componentDidMount",value:function(){this.checkLoginStatus()}},{key:"handleLogin",value:function(e){this.setState({loggedInStatus:"LOGGED_IN",user:e.user,isLoggedIn:!0})}},{key:"handleLogout",value:function(){this.setState({loggedInStatus:"NOT_LOGGED_IN",user:{},isLoggedIn:!1})}},{key:"render",value:function(){var e=this;return Object(y.jsxs)("div",{className:"App",children:[new p.a({bottom:"64px",right:"32px",left:"unset",time:"0.5s",mixColor:"#fff",backgroundColor:"#fff",buttonColorDark:"#100f2c",buttonColorLight:"#fff",saveInCookies:!1,label:"\ud83c\udf13",autoMatchOsTheme:!0}).showWidget(),Object(y.jsx)(P,{isLoggedIn:this.state.isLoggedIn}),Object(y.jsx)("br",{}),Object(y.jsx)(j.a,{children:Object(y.jsxs)(g.c,{children:[Object(y.jsx)(g.a,{exact:!0,path:"/todo-list-frontend",render:function(t){return Object(y.jsx)(G,Object(c.a)(Object(c.a)({},t),{},{handleLogin:e.handleLogin,handleLogout:e.handleLogout,loggedInStatus:e.state.loggedInStatus}))}}),Object(y.jsx)(g.a,{exact:!0,path:"/todo-list-frontend/dashboard",render:function(t){return Object(y.jsx)(Y,Object(c.a)(Object(c.a)({},t),{},{loggedInStatus:e.state.loggedInStatus,handleLogout:e.handleLogout,user_id:e.state.user.id,isLoggedIn:e.state.isLoggedIn}))}})]})})]})}}]),n}(a.Component),K=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,103)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,o=t.getLCP,i=t.getTTFB;n(e),a(e),s(e),o(e),i(e)}))};n(85);i.a.render(Object(y.jsx)(s.a.StrictMode,{children:Object(y.jsx)(z,{})}),document.getElementById("root")),K()}},[[86,1,2]]]);
//# sourceMappingURL=main.3d67a0e4.chunk.js.map